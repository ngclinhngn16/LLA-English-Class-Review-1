<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLA - REVIEW 1</title>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #2980b9;
            --success: #27ae60;
            --error: #c0392b;
            --explain: #16a085;
            --translate: #8e44ad;
            --bg: #f4f6f7;
            --hint: #f39c12;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 950px; /* M·ªü r·ªông chi·ªÅu ngang ƒë·ªÉ ch·ª©a c·ªôt b√™n ph·∫£i */
            margin: 0 auto;
            padding: 20px;
            background-color: var(--bg);
            font-weight: 400; /* Font th∆∞·ªùng, kh√¥ng in ƒë·∫≠m */
        }

        /* Student Info Box */
        .student-info {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            border-left: 5px solid var(--accent);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .student-info input {
            flex-grow: 1;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        h1 { text-align: center; color: var(--primary); margin-bottom: 30px; font-weight: 600; }
        h2 { color: var(--primary); border-bottom: 2px solid #eee; padding-bottom: 10px; margin-top: 0; font-weight: 600; font-size: 1.4em;}
        
        .instruction {
            background-color: #e8f4f8;
            color: #2980b9;
            padding: 10px 15px;
            border-radius: 5px;
            font-style: italic;
            margin-bottom: 20px;
            font-weight: 400;
        }

        .section {
            background: white;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .question-block {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #eee;
        }

        .question-text {
            font-weight: 500; /* Ch·ªâ h∆°i ƒë·∫≠m h∆°n text th∆∞·ªùng m·ªôt ch√∫t */
            font-size: 1.05em;
            margin-bottom: 15px;
        }

        /* L√†m n·ªïi b·∫≠t ph·∫ßn b·ªã sai (Task 3) */
        .question-text b {
            color: var(--error);
            background-color: #fceae9;
            padding: 0 4px;
            border-radius: 3px;
            font-weight: 600;
        }

        /* Inputs & Selects */
        select, input[type="text"] {
            padding: 8px;
            border: 1px solid #ccc; /* Vi·ªÅn m·∫£nh h∆°n */
            border-radius: 4px;
            font-size: 1em;
            transition: 0.3s;
            font-family: inherit;
        }
        
        /* --- TASK 1 LAYOUT (Sticky Sidebar) --- */
        .task1-wrapper {
            display: flex;
            gap: 30px;
            align-items: flex-start; /* Quan tr·ªçng ƒë·ªÉ sticky ho·∫°t ƒë·ªông */
        }
        
        .task1-questions {
            flex: 1; /* Chi·∫øm ph·∫ßn l·ªõn di·ªán t√≠ch */
        }

        .task1-definitions {
            width: 350px; /* Chi·ªÅu r·ªông c·ªë ƒë·ªãnh cho h·ªôp ƒë·ªãnh nghƒ©a */
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
            position: sticky; /* K·ª∏ THU·∫¨T STICKY */
            top: 20px; /* C√°ch m√©p tr√™n 20px khi cu·ªôn */
            font-size: 0.9em;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        
        .def-item { margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #eee; }
        .def-key { font-weight: 700; color: var(--accent); margin-right: 5px; font-size: 1.1em; }

        /* Responsive cho Mobile: Khi m√†n h√¨nh nh·ªè, h·ªôp ƒë·ªãnh nghƒ©a nh·∫£y l√™n tr√™n */
        @media (max-width: 768px) {
            .task1-wrapper { flex-direction: column-reverse; }
            .task1-definitions { width: 100%; position: static; box-sizing: border-box; }
        }

        /* --- Vertical Options (A/B/C) --- */
        .radio-option {
            display: block; /* Xu·ªëng d√≤ng */
            margin-bottom: 8px;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: background 0.2s;
        }
        .radio-option:hover { background-color: #f0f8ff; }
        .option-label { font-weight: 600; color: var(--accent); margin-right: 8px; }

        /* Buttons */
        .btn-group { margin-top: 15px; display: flex; gap: 8px; flex-wrap: wrap; }
        button {
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            color: white;
            font-size: 0.9em;
            font-family: inherit;
        }
        .btn-check { background-color: var(--accent); }
        .btn-check:hover { background-color: #2980b9; }
        .btn-explain { background-color: var(--explain); display: none; }
        .btn-trans { background-color: var(--translate); display: none; }
        
        /* Hint Button */
        .hint-btn {
            background-color: #fff;
            color: #f39c12;
            border: 1px solid #f39c12;
            padding: 2px 8px;
            font-size: 0.8em;
            margin-left: 5px;
            border-radius: 12px;
            cursor: pointer;
        }
        .hint-btn:hover { background-color: #fff8e1; }
        .hint-text { color: #888; font-style: italic; font-size: 0.9em; margin-left: 5px; }

        /* Feedback States */
        .correct-input { border-color: var(--success) !important; background-color: #eafaf1; }
        .incorrect-input { border-color: var(--error) !important; background-color: #fceae9; }
        .feedback-msg { display: block; margin-top: 5px; font-size: 0.95em; font-weight: 500; }
        .text-success { color: var(--success); }
        .text-error { color: var(--error); }
        .retry-note { font-weight: 400; color: #7f8c8d; font-size: 0.9em; margin-left: 5px; }

        /* Hidden Info Boxes */
        .info-box {
            display: none;
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.95em;
        }
        .explain-box { background-color: #e8f8f5; border-left: 4px solid var(--explain); color: #0e6655; }
        .trans-box { background-color: #f5eef8; border-left: 4px solid var(--translate); color: #5b2c6f; }

        /* Score Board */
        .score-board {
            position: sticky;
            bottom: 0;
            background: #34495e;
            color: white;
            padding: 15px;
            text-align: center;
            font-size: 1.1em;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
        }
        .total-score { font-weight: bold; font-size: 1.3em; color: #f1c40f; }
        .btn-submit-all {
            background-color: #f1c40f;
            color: #2c3e50;
            padding: 8px 20px;
            font-size: 1em;
            border-radius: 5px;
            font-weight: 600;
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>LLA - REVIEW 1</h1>
    </div>

    <div class="student-info">
        <label for="studentName"><strong>H·ªç v√† T√™n h·ªçc vi√™n:</strong></label>
        <input type="text" id="studentName" placeholder="Nh·∫≠p t√™n c·ªßa b·∫°n v√†o ƒë√¢y...">
    </div>

    <div class="section">
        <h2>Task 1</h2>
        <div class="instruction">Instruction: Match the term in the list with its correct definition (A-F).</div>
        
        <div class="task1-wrapper">
            <div class="task1-questions" id="part1-container">
                </div>

            <div class="task1-definitions">
                <h3 style="margin-top:0; color:var(--accent); border-bottom:1px solid #ddd; padding-bottom:5px;">Definitions Box</h3>
                <div class="def-item"><span class="def-key">A.</span> A quick, temporary fix for a bug directly on the live server.</div>
                <div class="def-item"><span class="def-key">B.</span> A simulation environment that mimics real hardware but isn't real.</div>
                <div class="def-item"><span class="def-key">C.</span> The uncontrolled expansion of project goals/features without adjusting time/budget.</div>
                <div class="def-item"><span class="def-key">D.</span> A critical issue that halts the entire process/release.</div>
                <div class="def-item"><span class="def-key">E.</span> The amount of data that can be transmitted (or a team's capacity to work).</div>
                <div class="def-item"><span class="def-key">F.</span> The action of reducing the severity or likelihood of a risk.</div>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>Task 2</h2>
        <div class="instruction">Instruction: Choose the correct word pair to complete the comparison sentence.</div>
        <div id="part2-container"></div>
    </div>

    <div class="section">
        <h2>Task 3</h2>
        <div class="instruction">Instruction: The <b>red bold text</b> is logically incorrect. Choose the best option to fix it.</div>
        <div id="part3-container"></div>
    </div>

    <div class="section">
        <h2>Task 4</h2>
        <div class="instruction">Instruction: Read the situation and choose the best response for the second speaker.</div>
        <div id="part4-container"></div>
    </div>

    <div class="section">
        <h2>Task 5</h2>
        <div class="instruction">Instruction: Fill in the blanks with the words: <b>held up, elaborate, workaround, rather, regarding</b>.</div>
        <div id="part5-container"></div>
    </div>

    <div class="section">
        <h2>Task 6</h2>
        <div class="instruction">Instruction: Reorder the keywords to make a complete professional sentence.</div>
        <div id="part6-container"></div>
    </div>

    <div class="section">
        <h2>Task 7</h2>
        <div class="instruction">Instruction: Complete the email by filling in the blanks. Click the bulb üí° for a hint.</div>
        <div style="background: #fdfdfd; padding: 25px; border: 1px solid #ccc; border-radius: 5px; font-family: 'Segoe UI', sans-serif;">
            <p style="margin-top:0;"><strong>Subject:</strong> Project Status Update</p>
            <p>Dear Client,</p>
            <p>I am writing to update you on the project status. Unfortunately, we are currently at a 
                (1) <input type="text" id="p7-q1" class="scorable" style="width: 120px;"> 
                <button class="hint-btn" onclick="showHint('p7-q1', 'red')">üí°</button>
                <span id="fb-p7-q1"></span>.
            </p>
            <p>This morning, the testing team identified a critical bug. It is a 
                (2) <input type="text" id="p7-q2" class="scorable" style="width: 120px;"> 
                <button class="hint-btn" onclick="showHint('p7-q2', 'sh')">üí°</button>
                <span id="fb-p7-q2"></span> because users cannot log in.
            </p>
            <p>Specifically, the "Login" button is 
                (3) <input type="text" id="p7-q3" class="scorable" style="width: 120px;"> 
                <button class="hint-btn" onclick="showHint('p7-q3', 'ov')">üí°</button>
                <span id="fb-p7-q3"></span> with the "Sign Up" text, making it unclickable.
            </p>
            <p>This issue only happens on Real Devices, not on the 
                (4) <input type="text" id="p7-q4" class="scorable" style="width: 120px;"> 
                <button class="hint-btn" onclick="showHint('p7-q4', 'si')">üí°</button>
                <span id="fb-p7-q4"></span>.
            </p>
            <p>We have a 
                (5) <input type="text" id="p7-q5" class="scorable" style="width: 120px;"> 
                <button class="hint-btn" onclick="showHint('p7-q5', 'mi')">üí°</button>
                <span id="fb-p7-q5"></span> plan:
            </p>
            <ol>
                <li>The Dev team will fix the UI code today.</li>
                <li>We need you to (6) <input type="text" id="p7-q6" class="scorable" style="width: 120px;"> 
                <button class="hint-btn" onclick="showHint('p7-q6', 'cl')">üí°</button>
                <span id="fb-p7-q6"></span> the expected screen size for the new iPad.</li>
            </ol>
            <p>Best regards,<br>Project Manager.</p>
        </div>
        <br>
        <div class="btn-group">
            <button class="btn-check" onclick="checkPart7()">Check Task 7</button>
            <button id="btn-exp-p7" class="btn-explain" onclick="toggle('exp-p7')">Gi·∫£i th√≠ch</button>
            <button id="btn-trans-p7" class="btn-trans" onclick="toggle('trans-p7')">D·ªãch nghƒ©a</button>
        </div>
        <div id="fb-p7-main" class="feedback-msg"></div>
        <div id="exp-p7" class="info-box explain-box">
            <b>ƒê√°p √°n:</b> 1. Red Light | 2. Showstopper | 3. Overlapping | 4. Simulator | 5. Mitigation | 6. Clarify
        </div>
        <div id="trans-p7" class="info-box trans-box">
            Th∆∞a Kh√°ch h√†ng, t√¥i vi·∫øt ƒë·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i. Ch√∫ng t√¥i ƒëang ·ªü m·ª©c B√°o ƒë·ªông ƒê·ªè. S√°ng nay ph√°t hi·ªán l·ªói nghi√™m tr·ªçng (Showstopper). N√∫t Login b·ªã ch·ªìng ch√©o (Overlapping). L·ªói n√†y kh√¥ng b·ªã tr√™n Gi·∫£ l·∫≠p (Simulator). Ch√∫ng t√¥i c√≥ k·∫ø ho·∫°ch gi·∫£m thi·ªÉu (Mitigation). C·∫ßn b·∫°n l√†m r√µ (Clarify) k√≠ch th∆∞·ªõc m√†n h√¨nh.
        </div>
    </div>

    <div class="score-board">
        <div>
            K·∫æT QU·∫¢: <span id="total-score" class="total-score">0</span> / 32
        </div>
        <div>
            <button class="btn-submit-all" onclick="calculateTotalScore()">C·∫≠p nh·∫≠t ƒêi·ªÉm & Sao ch√©p KQ</button>
        </div>
    </div>

<script>
    // --- DATA ---
    const part1Data = [
        { q: "Scope Creep", ans: "C", exp: "S·ª± ph√¨nh to ph·∫°m vi d·ª± √°n kh√¥ng ki·ªÉm so√°t.", trans: "S·ª± m·ªü r·ªông kh√¥ng ki·ªÉm so√°t c·ªßa c√°c m·ª•c ti√™u d·ª± √°n." },
        { q: "Showstopper", ans: "D", exp: "L·ªói nghi√™m tr·ªçng ch·∫∑n ƒë·ª©ng quy tr√¨nh.", trans: "M·ªôt v·∫•n ƒë·ªÅ nghi√™m tr·ªçng l√†m d·ª´ng to√†n b·ªô quy tr√¨nh." },
        { q: "Mitigation", ans: "F", exp: "H√†nh ƒë·ªông gi·∫£m nh·∫π r·ªßi ro.", trans: "H√†nh ƒë·ªông gi·∫£m m·ª©c ƒë·ªô nghi√™m tr·ªçng c·ªßa r·ªßi ro." },
        { q: "Hotfix", ans: "A", exp: "B·∫£n v√° l·ªói n√≥ng (ngay l·∫≠p t·ª©c).", trans: "M·ªôt b·∫£n s·ª≠a l·ªói nhanh tr·ª±c ti·∫øp tr√™n h·ªá th·ªëng." },
        { q: "Simulator", ans: "B", exp: "M√¥i tr∆∞·ªùng gi·∫£ l·∫≠p.", trans: "M√¥i tr∆∞·ªùng m√¥ ph·ªèng ph·∫ßn c·ª©ng nh∆∞ng kh√¥ng ph·∫£i th·∫≠t." },
        { q: "Bandwidth", ans: "E", exp: "NƒÉng l·ª±c l√†m vi·ªác c·ªßa team (nghƒ©a b√≥ng).", trans: "Kh·∫£ nƒÉng l√†m vi·ªác c·ªßa m·ªôt nh√≥m." }
    ];

    const part2Data = [
        { 
            pre: "Unlike a ", gap1: "fixed schedule", mid: ", which requires 9-5, ", gap2: "flexible hours", post: " allows you to choose time.",
            opts: ["fixed schedule", "flexible hours"],
            exp: "Fixed: C·ªë ƒë·ªãnh. Flexible: Linh ho·∫°t.", trans: "Kh√¥ng gi·ªëng l·ªãch c·ªë ƒë·ªãnh, gi·ªù l√†m vi·ªác linh ho·∫°t cho ph√©p b·∫°n ch·ªçn gi·ªù."
        },
        { 
            pre: "An ", gap1: "amber light", mid: " means risk but manageable, whereas a ", gap2: "red light", post: " means we are behind schedule.",
            opts: ["amber light", "red light"],
            exp: "Amber: V√†ng (R·ªßi ro). Red: ƒê·ªè (Ch·∫≠m tr·ªÖ).", trans: "ƒê√®n v√†ng nghƒ©a l√† c√≥ r·ªßi ro, ƒë√®n ƒë·ªè nghƒ©a l√† ch·∫≠m ti·∫øn ƒë·ªô."
        },
        { 
            pre: "A ", gap1: "mockup", mid: " is a specific draft of our product, while a ", gap2: "reference", post: " is just an example.",
            opts: ["mockup", "reference"],
            exp: "Mockup: B·∫£n thi·∫øt k·∫ø m·∫´u. Reference: T√†i li·ªáu tham kh·∫£o.", trans: "Mockup l√† b·∫£n nh√°p thi·∫øt k·∫ø, Reference l√† v√≠ d·ª• tham kh·∫£o."
        },
        { 
            pre: "The deadline is ", gap1: "aggressive", mid: ", so honestly, it is not ", gap2: "feasible", post: " to finish on time.",
            opts: ["aggressive", "feasible"],
            exp: "Aggressive: Kh·∫Øt khe/G·∫•p. Feasible: Kh·∫£ thi.", trans: "H·∫°n ch√≥t qu√° g·∫•p g√°p, n√™n vi·ªác ho√†n th√†nh l√† kh√¥ng kh·∫£ thi."
        }
    ];

    const part3Data = [
        {
            q: "The deadline is fixed, so we must <b>add more features</b> to finish on time.",
            opts: ["prioritize key features", "increase the scope", "assume the requirements"],
            ans: 0,
            exp: "Deadline c·ªë ƒë·ªãnh -> Ph·∫£i ∆∞u ti√™n (prioritize), kh√¥ng ƒë∆∞·ª£c th√™m vi·ªác.", trans: "H·∫°n ch√≥t ƒë√£ c·ªë ƒë·ªãnh, v√¨ v·∫≠y ch√∫ng ta ph·∫£i ∆∞u ti√™n c√°c t√≠nh nƒÉng ch√≠nh."
        },
        {
            q: "I have severe eye strain, so I plan to <b>watch movies to relax</b>.",
            opts: ["take regular breaks and look away", "abuse caffeine", "use a simulator"],
            ans: 0,
            exp: "M·ªèi m·∫Øt -> C·∫ßn ngh·ªâ ng∆°i nh√¨n ra xa.", trans: "T√¥i b·ªã m·ªèi m·∫Øt, v√¨ v·∫≠y t√¥i s·∫Ω ngh·ªâ gi·∫£i lao v√† nh√¨n ra xa."
        },
        {
            q: "The system fails on the Real Device. This is <b>just a minor bug</b>.",
            opts: ["a green light", "a showstopper", "a mitigation plan"],
            ans: 1,
            exp: "L·ªói tr√™n thi·∫øt b·ªã th·∫≠t l√† l·ªói nghi√™m tr·ªçng (Showstopper).", trans: "H·ªá th·ªëng l·ªói tr√™n Thi·∫øt b·ªã th·∫≠t. ƒê√¢y l√† m·ªôt l·ªói nghi√™m tr·ªçng."
        },
        {
            q: "We are behind schedule, so the project status is currently a <b>Green Light</b>.",
            opts: ["Red Light", "Workaround", "Bottleneck"],
            ans: 0,
            exp: "Ch·∫≠m ti·∫øn ƒë·ªô -> ƒê√®n ƒê·ªè (Red Light).", trans: "Ch√∫ng ta ƒëang b·ªã ch·∫≠m ti·∫øn ƒë·ªô, tr·∫°ng th√°i l√† ƒê√®n ƒê·ªè."
        }
    ];

    const part4Data = [
        {
            context: "<b>BA:</b> The user needs to upload the file.<br><b>Dev:</b> Wait. _______ Is it a PDF or a JPG?",
            opts: ["Do you have a specific mockup?", "Just to be clear, are we assuming the file format?", "What is the expected behavior?"],
            ans: 1,
            exp: "H·ªèi ƒë·ªÉ x√°c nh·∫≠n gi·∫£ ƒë·ªãnh -> Just to be clear...", trans: "ƒê·ª£i ƒë√£. ƒê·ªÉ cho r√µ r√†ng, c√≥ ph·∫£i ch√∫ng ta ƒëang gi·∫£ ƒë·ªãnh ƒë·ªãnh d·∫°ng file kh√¥ng?"
        },
        {
            context: "<b>Client:</b> I want this done in 2 days.<br><b>PM:</b> _______ We need at least 5 days to code.",
            opts: ["That timeline is extremely aggressive.", "That is feasible.", "I propose a green light."],
            ans: 0,
            exp: "T·ª´ ch·ªëi kh√©o v√¨ qu√° g·∫•p -> Timeline is aggressive.", trans: "M·ªëc th·ªùi gian ƒë√≥ c·ª±c k·ª≥ g·∫•p g√°p. Ch√∫ng t√¥i c·∫ßn √≠t nh·∫•t 5 ng√†y."
        },
        {
            context: "<b>Colleague:</b> I feel empty and tired. I think I have burnout.<br><b>You:</b> Oh no. _______",
            opts: ["You should work overtime.", "You should abuse caffeine.", "You should take some paid holidays to relax."],
            ans: 2,
            exp: "Burnout -> C·∫ßn ngh·ªâ ng∆°i (Paid holidays).", trans: "√îi kh√¥ng. B·∫°n n√™n xin ngh·ªâ ph√©p c√≥ l∆∞∆°ng ƒë·ªÉ th∆∞ gi√£n ƒëi."
        }
    ];

    const part5Data = [
        { q: "Could you ______ on what you mean by 'automatic'?", ans: "elaborate", exp: "Elaborate on: Gi·∫£i th√≠ch th√™m.", trans: "B·∫°n c√≥ th·ªÉ gi·∫£i th√≠ch r√µ h∆°n √Ω b·∫°n l√† g√¨ kh√¥ng?" },
        { q: "There seems to be a gap ______ the logic.", ans: "regarding", exp: "Regarding: Li√™n quan ƒë·∫øn.", trans: "D∆∞·ªùng nh∆∞ c√≥ m·ªôt l·ªó h·ªïng li√™n quan ƒë·∫øn logic." },
        { q: "Actually, I'd ______ not be the MC because I am shy.", ans: "rather", exp: "I'd rather not: T√¥i th√† kh√¥ng l√†m.", trans: "Th·ª±c ra t√¥i th√† kh√¥ng l√†m MC v√¨ t√¥i ng·∫°i." },
        { q: "The release is being ______ by a server error.", ans: "held up", exp: "Held up: B·ªã tr√¨ ho√£n.", trans: "ƒê·ª£t ph√°t h√†nh ƒëang b·ªã tr√¨ ho√£n b·ªüi l·ªói m√°y ch·ªß." },
        { q: "The deadline is too tight, so I propose a ______.", ans: "workaround", exp: "Workaround: Gi·∫£i ph√°p thay th·∫ø.", trans: "H·∫°n ch√≥t qu√° g·∫•p, t√¥i ƒë·ªÅ xu·∫•t gi·∫£i ph√°p thay th·∫ø." }
    ];

    const part6Data = [
        { q: "swap / Can / roles / we / the / presentation? / for", ans: "Can we swap roles for the presentation?", exp: "Can we + V + O?", trans: "Ch√∫ng ta c√≥ th·ªÉ ƒë·ªïi vai cho b√†i thuy·∫øt tr√¨nh ƒë∆∞·ª£c kh√¥ng?" },
        { q: "feasible / It / not / is / complete / 2 days. / in / to", ans: "It is not feasible to complete in 2 days.", exp: "It is not + adj + to V.", trans: "Vi·ªác ho√†n th√†nh trong 2 ng√†y l√† kh√¥ng kh·∫£ thi." },
        { q: "escalate / I / issue / will / to / manager. / the / this", ans: "I will escalate this issue to the manager.", exp: "Escalate to someone.", trans: "T√¥i s·∫Ω b√°o c√°o v·∫•n ƒë·ªÅ n√†y l√™n qu·∫£n l√Ω." },
        { q: "If / you / lead / sedentary lifestyle / you / will / have / back pain.", ans: "If you lead a sedentary lifestyle, you will have back pain.", exp: "If + HTƒê, S + Will + V.", trans: "N·∫øu b·∫°n c√≥ l·ªëi s·ªëng √≠t v·∫≠n ƒë·ªông, b·∫°n s·∫Ω b·ªã ƒëau l∆∞ng." }
    ];

    // --- RENDER FUNCTIONS ---

    function renderPart1() {
        const container = document.getElementById('part1-container');
        part1Data.forEach((item, index) => {
            const html = `
                <div class="question-block">
                    <div class="question-text">${index + 1}. ${item.q}</div>
                    <select id="p1-q${index}" class="scorable">
                        <option value="">Choose Definition...</option>
                        <option value="A">A</option><option value="B">B</option><option value="C">C</option>
                        <option value="D">D</option><option value="E">E</option><option value="F">F</option>
                    </select>
                    <span id="fb-p1-q${index}" class="feedback-msg"></span>
                    <div class="btn-group">
                        <button class="btn-check" onclick="checkSelect('p1-q${index}', '${item.ans}', 'fb-p1-q${index}', 'btn-exp-p1-${index}', 'btn-trans-p1-${index}')">Check</button>
                        <button id="btn-exp-p1-${index}" class="btn-explain" onclick="toggle('exp-p1-${index}')">Gi·∫£i th√≠ch</button>
                        <button id="btn-trans-p1-${index}" class="btn-trans" onclick="toggle('trans-p1-${index}')">D·ªãch nghƒ©a</button>
                    </div>
                    <div id="exp-p1-${index}" class="info-box explain-box">${item.exp}</div>
                    <div id="trans-p1-${index}" class="info-box trans-box">${item.trans}</div>
                </div>`;
            container.innerHTML += html;
        });
    }

    function renderPart2() {
        const container = document.getElementById('part2-container');
        part2Data.forEach((item, index) => {
            let opts = `<option value="">---</option><option value="${item.opts[0]}">${item.opts[0]}</option><option value="${item.opts[1]}">${item.opts[1]}</option>`;
            const html = `
                <div class="question-block">
                    <div class="question-text">
                        ${index + 1}. ${item.pre} <select id="p2-q${index}-1" class="scorable" style="width:130px;">${opts}</select> <span id="fb-p2-q${index}-1"></span>
                        ${item.mid} <select id="p2-q${index}-2" class="scorable" style="width:130px;">${opts}</select> <span id="fb-p2-q${index}-2"></span>
                        ${item.post}
                    </div>
                    <div class="btn-group">
                        <button class="btn-check" onclick="checkPart2(${index}, '${item.gap1}', '${item.gap2}')">Check</button>
                        <button id="btn-exp-p2-${index}" class="btn-explain" onclick="toggle('exp-p2-${index}')">Gi·∫£i th√≠ch</button>
                        <button id="btn-trans-p2-${index}" class="btn-trans" onclick="toggle('trans-p2-${index}')">D·ªãch nghƒ©a</button>
                    </div>
                    <div id="exp-p2-${index}" class="info-box explain-box">${item.exp}</div>
                    <div id="trans-p2-${index}" class="info-box trans-box">${item.trans}</div>
                </div>`;
            container.innerHTML += html;
        });
    }

    function renderPart3() {
        const container = document.getElementById('part3-container');
        const labels = ["A", "B", "C"];
        part3Data.forEach((item, index) => {
            // Render Options vertically with labels
            let optsHTML = item.opts.map((opt, i) => `
                <label class="radio-option">
                    <input type="radio" name="p3-q${index}" value="${i}" class="scorable-radio"> 
                    <span class="option-label">${labels[i]}.</span> ${opt}
                </label>
            `).join('');
            
            const html = `
                <div class="question-block">
                    <div class="question-text">${index + 1}. ${item.q}</div>
                    <div>${optsHTML}</div>
                    <div id="fb-p3-q${index}" class="feedback-msg"></div>
                    <div class="btn-group">
                        <button class="btn-check" onclick="checkRadio('p3-q${index}', ${item.ans}, 'fb-p3-q${index}', 'btn-exp-p3-${index}', 'btn-trans-p3-${index}')">Check</button>
                        <button id="btn-exp-p3-${index}" class="btn-explain" onclick="toggle('exp-p3-${index}')">Gi·∫£i th√≠ch</button>
                        <button id="btn-trans-p3-${index}" class="btn-trans" onclick="toggle('trans-p3-${index}')">D·ªãch nghƒ©a</button>
                    </div>
                    <div id="exp-p3-${index}" class="info-box explain-box">${item.exp}</div>
                    <div id="trans-p3-${index}" class="info-box trans-box">${item.trans}</div>
                </div>`;
            container.innerHTML += html;
        });
    }

    function renderPart4() {
        const container = document.getElementById('part4-container');
        const labels = ["A", "B", "C"];
        part4Data.forEach((item, index) => {
             // Render Options vertically with labels
             let optsHTML = item.opts.map((opt, i) => `
                <label class="radio-option">
                    <input type="radio" name="p4-q${index}" value="${i}" class="scorable-radio"> 
                    <span class="option-label">${labels[i]}.</span> ${opt}
                </label>
            `).join('');

            const html = `
                <div class="question-block">
                    <div class="question-text" style="background:#f9f9f9; padding:10px;">${index + 1}. ${item.context}</div>
                    <div style="margin-top:10px;">${optsHTML}</div>
                    <div id="fb-p4-q${index}" class="feedback-msg"></div>
                    <div class="btn-group">
                        <button class="btn-check" onclick="checkRadio('p4-q${index}', ${item.ans}, 'fb-p4-q${index}', 'btn-exp-p4-${index}', 'btn-trans-p4-${index}')">Check</button>
                        <button id="btn-exp-p4-${index}" class="btn-explain" onclick="toggle('exp-p4-${index}')">Gi·∫£i th√≠ch</button>
                        <button id="btn-trans-p4-${index}" class="btn-trans" onclick="toggle('trans-p4-${index}')">D·ªãch nghƒ©a</button>
                    </div>
                    <div id="exp-p4-${index}" class="info-box explain-box">${item.exp}</div>
                    <div id="trans-p4-${index}" class="info-box trans-box">${item.trans}</div>
                </div>`;
            container.innerHTML += html;
        });
    }

    function renderPart5() {
        const container = document.getElementById('part5-container');
        part5Data.forEach((item, index) => {
            const html = `
                <div class="question-block">
                    <div class="question-text">${index + 1}. ${item.q.replace('______', `<input type="text" id="p5-q${index}" class="scorable" style="width:120px;">`)} </div>
                    <span id="fb-p5-q${index}" class="feedback-msg"></span>
                    <div class="btn-group">
                        <button class="btn-check" onclick="checkText('p5-q${index}', '${item.ans}', 'fb-p5-q${index}', 'btn-exp-p5-${index}', 'btn-trans-p5-${index}')">Check</button>
                        <button id="btn-exp-p5-${index}" class="btn-explain" onclick="toggle('exp-p5-${index}')">Gi·∫£i th√≠ch</button>
                        <button id="btn-trans-p5-${index}" class="btn-trans" onclick="toggle('trans-p5-${index}')">D·ªãch nghƒ©a</button>
                    </div>
                    <div id="exp-p5-${index}" class="info-box explain-box">${item.exp}</div>
                    <div id="trans-p5-${index}" class="info-box trans-box">${item.trans}</div>
                </div>`;
            container.innerHTML += html;
        });
    }

    function renderPart6() {
        const container = document.getElementById('part6-container');
        part6Data.forEach((item, index) => {
            const html = `
                <div class="question-block">
                    <div class="question-text">${index + 1}. Keywords: <span style="font-weight:normal;">${item.q}</span></div>
                    <input type="text" id="p6-q${index}" class="scorable" placeholder="Type sentence here..." style="width:100%;">
                    <div id="fb-p6-q${index}" class="feedback-msg"></div>
                    <div class="btn-group">
                        <button class="btn-check" onclick="checkSentence('p6-q${index}', '${item.ans.replace(/'/g, "\\'")}', 'fb-p6-q${index}', 'btn-exp-p6-${index}', 'btn-trans-p6-${index}')">Check</button>
                        <button id="btn-exp-p6-${index}" class="btn-explain" onclick="toggle('exp-p6-${index}')">Gi·∫£i th√≠ch</button>
                        <button id="btn-trans-p6-${index}" class="btn-trans" onclick="toggle('trans-p6-${index}')">ƒê√°p √°n</button>
                    </div>
                    <div id="exp-p6-${index}" class="info-box explain-box">${item.exp}</div>
                    <div id="trans-p6-${index}" class="info-box trans-box"><b>ƒê√°p √°n:</b> ${item.ans}<br><b>D·ªãch:</b> ${item.trans}</div>
                </div>`;
            container.innerHTML += html;
        });
    }

    // --- UTILS ---
    function toggle(id) {
        const el = document.getElementById(id);
        el.style.display = (el.style.display === "block") ? "none" : "block";
    }

    function cleanStr(str) { return str.trim().toLowerCase().replace(/[.,?!]/g, '').replace(/\s+/g, ' '); }

    // HINT FUNCTION FOR TASK 7
    function showHint(inputId, hintText) {
        const inputEl = document.getElementById(inputId);
        // Hi·ªán g·ª£i √Ω v√†o √¥ input d∆∞·ªõi d·∫°ng placeholder ho·∫∑c text m·ªù, 
        // ho·∫∑c ƒë∆°n gi·∫£n l√† alert nh·∫π, ho·∫∑c text hi·ªÉn th·ªã ngay c·∫°nh. 
        // Y√™u c·∫ßu: "nh·∫•n v√†o v√† th·∫•y 1-2 ch·ªØ c√°i ƒë·∫ßu".
        // Ta s·∫Ω ch√®n text v√†o √¥ input n·∫øu √¥ ƒëang tr·ªëng.
        if (inputEl.value === "") {
            inputEl.value = hintText + "...";
            inputEl.style.color = "#888";
        } else {
            // N·∫øu ƒë√£ c√≥ ch·ªØ (d√π l√† hint c≈©), ta reset
            if(inputEl.value.includes("...")) {
                 inputEl.value = hintText + "...";
            }
        }
        
        // X√≥a hint khi user focus v√†o nh·∫≠p
        inputEl.onfocus = function() {
            if(this.value.includes("...")) {
                this.value = "";
                this.style.color = "#333";
            }
        }
    }

    function setFeedback(isCorrect, inputEl, msgEl, expBtnId, transBtnId) {
        if (isCorrect) {
            inputEl.classList.remove('incorrect-input');
            inputEl.classList.add('correct-input');
            if(msgEl) {
                msgEl.innerHTML = `‚úÖ Ch√≠nh x√°c!`;
                msgEl.className = "feedback-msg text-success";
            }
            if(expBtnId) document.getElementById(expBtnId).style.display = 'inline-block';
            if(transBtnId) document.getElementById(transBtnId).style.display = 'inline-block';
            return 1; // Score
        } else {
            inputEl.classList.remove('correct-input');
            inputEl.classList.add('incorrect-input');
            if(msgEl) {
                msgEl.innerHTML = `‚ùå Sai r·ªìi. <span class="retry-note">B·∫°n h√£y th·ª≠ l·∫°i nh√©!</span>`;
                msgEl.className = "feedback-msg text-error";
            }
            return 0;
        }
    }

    // --- CHECK FUNCTIONS ---

    function checkSelect(id, correctVal, msgId, expId, transId) {
        const el = document.getElementById(id);
        const msg = document.getElementById(msgId);
        setFeedback(el.value === correctVal, el, msg, expId, transId);
        updateRunningScore();
    }

    function checkPart2(index, ans1, ans2) {
        const el1 = document.getElementById(`p2-q${index}-1`);
        const el2 = document.getElementById(`p2-q${index}-2`);
        const msg1 = document.getElementById(`fb-p2-q${index}-1`);
        const msg2 = document.getElementById(`fb-p2-q${index}-2`);
        
        const ok1 = (el1.value === ans1);
        const ok2 = (el2.value === ans2);

        setFeedback(ok1, el1, msg1, null, null);
        setFeedback(ok2, el2, msg2, null, null);

        if(ok1 && ok2) {
             document.getElementById(`btn-exp-p2-${index}`).style.display = 'inline-block';
             document.getElementById(`btn-trans-p2-${index}`).style.display = 'inline-block';
        }
        updateRunningScore();
    }

    function checkRadio(name, correctIndex, msgId, expId, transId) {
        const radios = document.getElementsByName(name);
        const msgEl = document.getElementById(msgId);
        let selected = -1;
        
        // Reset styles (remove background from labels)
        radios.forEach(r => r.parentElement.style.backgroundColor = "transparent");

        for(let i=0; i<radios.length; i++) {
            if (radios[i].checked) selected = i;
        }

        if (selected === -1) {
            msgEl.innerHTML = "Vui l√≤ng ch·ªçn ƒë√°p √°n."; return;
        }

        if (selected === correctIndex) {
            radios[selected].parentElement.style.backgroundColor = "#eafaf1";
            msgEl.innerHTML = "‚úÖ Ch√≠nh x√°c!";
            msgEl.className = "feedback-msg text-success";
            document.getElementById(expId).style.display = 'inline-block';
            document.getElementById(transId).style.display = 'inline-block';
        } else {
            radios[selected].parentElement.style.backgroundColor = "#fceae9";
            msgEl.innerHTML = `‚ùå Sai r·ªìi. <span class="retry-note">B·∫°n h√£y th·ª≠ l·∫°i nh√©!</span>`;
            msgEl.className = "feedback-msg text-error";
        }
        updateRunningScore();
    }

    function checkText(id, correctText, msgId, expId, transId) {
        const el = document.getElementById(id);
        const msg = document.getElementById(msgId);
        // Clean hints if any before checking
        let val = el.value;
        if(val.includes("...")) val = ""; 
        
        const isCorrect = cleanStr(val) === cleanStr(correctText);
        setFeedback(isCorrect, el, msg, expId, transId);
        updateRunningScore();
    }

    function checkSentence(id, correctText, msgId, expId, transId) {
        const el = document.getElementById(id);
        const msg = document.getElementById(msgId);
        const isCorrect = cleanStr(el.value) === cleanStr(correctText);
        setFeedback(isCorrect, el, msg, expId, transId);
        updateRunningScore();
    }

    function checkPart7() {
        const answers = ["red light", "showstopper", "overlapping", "simulator", "mitigation", "clarify"];
        let correctCount = 0;
        
        for(let i=1; i<=6; i++) {
            const el = document.getElementById(`p7-q${i}`);
            const msg = document.getElementById(`fb-p7-q${i}`);
            
            let userVal = cleanStr(el.value);
            // remove hint chars if user didn't type
            if(userVal.includes("...")) userVal = "";

            if(userVal === answers[i-1]) {
                 el.classList.remove('incorrect-input');
                 el.classList.add('correct-input');
                 msg.innerHTML = "‚úÖ"; msg.className = "text-success";
                 correctCount++;
            } else {
                 el.classList.remove('correct-input');
                 el.classList.add('incorrect-input');
                 msg.innerHTML = "‚ùå"; msg.className = "text-error";
            }
        }

        const mainMsg = document.getElementById('fb-p7-main');
        if(correctCount === 6) {
            mainMsg.innerHTML = "Tuy·ªát v·ªùi
